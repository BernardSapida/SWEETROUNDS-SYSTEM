SELECT * FROM (SELECT 
    P.id AS 'product_id', 
    P.product_number, 
    P.name, 
    P.flavor, 
    P.price, 
    P.quantity, 
    P.image, 
    P.availability, 
    F.id AS 'favorite_id', 
    C.id AS 'cart_id',
CASE
    WHEN F.product_id IS NULL THEN FALSE
    ELSE TRUE
END AS 'in_favorite',
CASE
    WHEN C.product_id IS NULL THEN FALSE
    ELSE TRUE
END AS 'in_cart'
FROM products AS P
LEFT JOIN (SELECT product_id, id FROM favorites WHERE user_id = 1) AS F ON P.id = F.product_id
LEFT JOIN (SELECT product_id, id FROM cart_items WHERE cart_items.user_id = 1) AS C ON P.id = C.product_id) AS A
WHERE A.in_favorite = 1;